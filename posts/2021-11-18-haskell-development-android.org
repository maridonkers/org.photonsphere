----
title: Haskell development environment on Android phone
modified: 2021-11-18
meta_description: 
tags: Computer, Software, Linux, NixOS, Functional, Haskell, Android, Termux
----

#+OPTIONS: ^:nil

Install a full [[https://www.haskell.org/][Haskell]] development environment (including [[https://github.com/sol/hpack][hpack]] and [[https://www.haskell.org/cabal/][cabal]]) on your [[https://www.android.com/][Android]] phone. The command prompt runs via [[https://f-droid.org/en/packages/com.termux/][Termux]] and its [[https://wiki.termux.com/wiki/PRoot][PRoot]] (i.e. [[https://github.com/termux/proot-distro][proot-distro]]).
(.more.)

* F-Droid
Install F-Droid from [[https://www.f-droid.org/][f-droid.org]] (follow instructions).

* Termux + PRoot
First install the [[https://f-droid.org/en/packages/com.termux/][Termux]] package via [[F-Droid][F-Droid]] and then follow the [[https://wiki.termux.com/wiki/PRoot][PRoot]] instructions to install a Linux distribution on your phone (I use [[https://www.debian.org/][Debian]]).

#+BEGIN_SRC sh
  pkg install proot
  pkg install proot-distro
  proot-distro install debian
#+END_SRC

After installation has completed use the following to get a Debian prompt:

#+BEGIN_SRC sh
  proot-distro login debian
#+END_SRC

* Debian packages
A number of Debian packages are required and useful for your Haskell development environment. To install them start up Debian Linux under Termux (per instructions with [[Termux + PRoot][PRoot]]) and type the following commands:

#+BEGIN_SRC sh
  apt-get update
  apt-get install build-essential curl vim-nox silversearcher-ag git ghc cabal-install hpack hlint stylish-haskell libghc-zlib-dev libpq-dev
#+END_SRC

* Demonstration
Use the commands below to get and build my Paperspan export (HTML) to Instapaper import (CSV) convertor -- [[https://photonsphere.org/posts/2021-10-06-paperspan2instapaper.html][Paperspan export (HTML) to Instapaper import (CSV) convertor]].

#+BEGIN_SRC sh
  git clone https://github.com/maridonkers/paperspan2instapaper.git
  cd paperspan2instapaper
  cabal update
  hpack
  cabal build
  cp folders-example.yaml folders.yaml
  cabal run . -- yourpaperspanexportfile.html
#+END_SRC

Notes:  
- • Depending on your phone the =cabal new-update= and =cabal new-build= may take a while to complete.
- • If the build fails then simply start it again (I had to start it again once).

* Termux sessions
  If you require additional command prompts then simply swipe in from the left of the Termux window, to get the menu.

[[../images/TermuxSessions.png]]

  Select =NEW SESSION= in the menu.

* OpenSSH and GUI
** sshd
  Modern phones are multi-core powerhouses with loads of memory and I've compiled big projects on my 2013 phone (a Samsung Note 3). The small on screen keyboard is a bit of a nuisance so you can run a SSH-server on your phone and ssh into it from a computer with a regular keyboard. Termux documentation is here: [[https://wiki.termux.com/wiki/Remote_Access][Remote Access]].

** GUI
   You can also set up a graphical environment for your Termux installation, which enables you to run graphical programs from your termux prompt. Instructions here: [[https://wiki.termux.com/wiki/Graphical_Environment][Graphical Environment]].

* Screen dump
[[../images/TermuxLinuxDemo.png]]
